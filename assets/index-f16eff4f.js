(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const t of s.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&o(t)}).observe(document,{childList:!0,subtree:!0});function c(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=c(e);fetch(e.href,s)}})();var X=6371.00877,q=5,Y=30,E=60,S=126,k=38,V=43,D=136;function x(l,r,c){var o=Math.PI/180,e=180/Math.PI,s=X/q,t=Y*o,p=E*o,f=S*o,a=k*o,n=Math.tan(Math.PI*.25+p*.5)/Math.tan(Math.PI*.25+t*.5);n=Math.log(Math.cos(t)/Math.cos(p))/Math.log(n);var h=Math.tan(Math.PI*.25+t*.5);h=Math.pow(h,n)*Math.cos(t)/n;var y=Math.tan(Math.PI*.25+a*.5);y=s*h/Math.pow(y,n);var d={};if(l=="toXY"){d.lat=r,d.lng=c;var m=Math.tan(Math.PI*.25+r*o*.5);m=s*h/Math.pow(m,n);var u=c*o-f;u>Math.PI&&(u-=2*Math.PI),u<-Math.PI&&(u+=2*Math.PI),u*=n,d.x=Math.floor(m*Math.sin(u)+V+.5),d.y=Math.floor(y-m*Math.cos(u)+D+.5)}else{d.x=r,d.y=c;var v=r-V,b=y-c+D;m=Math.sqrt(v*v+b*b);var _=Math.pow(s*h/m,1/n);_=2*Math.atan(_)-Math.PI*.5,Math.abs(v)<=0?u=0:Math.abs(b)<=0?u=Math.PI*.5:u=Math.atan2(v,b);var P=u/n+f;d.lat=_*e,d.lng=P*e}return d}function $(l){const r=l.coords.latitude,c=l.coords.longitude,o=x("toXY",r,c),e=o.x,s=o.y;let t=new Date;const p=("0"+t.getHours()).slice(-2),f=("0"+t.getMinutes()).slice(-2),a=Number(p+f);let n="";210<=a&&a<510?n="0200":510<=a&&a<810?n="0500":810<=a&&a<1110?n="0800":1110<=a&&a<1410?n="1100":1410<=a&&a<1710?n="1400":1710<=a&&a<2010?n="1700":2010<=a&&a<2310?n="2000":(2310<=a||(t=new Date(new Date().setDate(new Date().getDate()-1))),n="2300");const h=t.getFullYear(),y=("0"+(t.getMonth()+1)).slice(-2),d=("0"+t.getDate()).slice(-2),m=`${h}${y}${d}`,u=`${n}`,v="serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&dataType=json&base_date="+m+"&base_time="+u+"&nx="+e+"&ny="+s,b=u.slice(0,2);document.querySelector("#standardTime").innerText=`${h}년 ${y}월 ${d}일 ${b}시 기준`;const P="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?"+v;fetch(P).then(M=>M.json()).then(M=>{const w=document.querySelector("#weather span:first-child"),L=document.querySelector("#weather span:nth-child(2)"),i=M.response.body.items.item[0].fcstValue,A=M.response.body.items.item[7].fcstValue,O=M.response.body.items.item[8].fcstValue;let T="";A>=50||[1,2,3,4].includes(O)?T="☂️":T="🌈",w.innerText=`${i}℃`,L.innerText=T;const g=document.querySelector("#image");i>=28?g.src="img/여름1.png":i>=23&&i<28?g.src="img/여름2.png":i>=20&&i<23?g.src="img/봄1.png":i>=17&&i<20?g.src="img/봄2.png":i>=12&&i<17?g.src="img/가을1.png":i>=9&&i<12?g.src="img/가을2.png":i>=5&&i<9?g.src="img/겨울1.png":i<5&&(g.src="img/겨울2.png")}).catch(M=>(console.error(M),alert("날씨 정보(온도, 강수)를 가져오지 못했습니다.")))}function j(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition($,j);function I(l){const r="http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?",c="stationName="+l+"&dataTerm=DAILY&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&ver=1.0",o=r+c;fetch(o).then(e=>e.json()).then(e=>{const s=document.querySelector("#weather span:last-child"),t=e.response.body.items[0].pm10Grade,p=e.response.body.items[0].pm25Grade;let f="";t>2||p>2?f="😷":f="😊",s.innerText=f}).catch(e=>(console.error(e),alert("미세먼지 정보를 가져오지 못했습니다.")))}function F(l,r){const c="http://apis.data.go.kr/B552584/MsrstnInfoInqireSvc/getNearbyMsrstnList?",o="tmX="+l+"&tmY="+r+"&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT/VfLl5i1bns2e+5RguVPd8lC+UZ2VDyHyVolEYXk6WoFiA==",e=c+o;fetch(e).then(s=>s.json()).then(s=>{const t=s.response.body.items[0].stationName;I(t)}).catch(s=>(console.error(s),I("종로구"),alert("가까운 미세먼지 측정소 조회에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")))}function G(l,r,c){const o="https://sgisapi.kostat.go.kr/OpenAPI3/transformation/transcoord.json?",e="src=4326&dst=5181&posX="+c+"&posY="+r+"&accessToken="+l,s=o+e;fetch(s).then(t=>t.json()).then(t=>{const p=t.result.posX,f=t.result.posY;F(p,f)}).catch(t=>(console.error(t),I("종로구"),alert("TM 좌표 변환 api 호출에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")))}function J(l){const r=l.coords.latitude,c=l.coords.longitude,s="https://sgisapi.kostat.go.kr/OpenAPI3/auth/authentication.json?"+"consumer_key=ba34dc5fa9b44d508fdb&consumer_secret=cb5934392922407e8811";fetch(s).then(t=>t.json()).then(t=>{const p=t.result.accessToken;G(p,r,c)}).catch(t=>(console.error(t),I("종로구"),alert("TM 좌표 변환 api용 액세스 토큰 발급에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")))}function N(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(J,N);document.querySelector("#app").innerHTML=`
  <div class="main">
    <span id="standardTime"></span>
    <h1>날씨별 추천 옷차림</h1>
    <div id="weather">
      <span id="temp"></span>
      <span class="icon"></span>
      <span class="icon"></span>
    </div>
    <img id="image" src="" />
  </div>
`;
