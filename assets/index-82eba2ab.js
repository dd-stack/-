(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=n(t);fetch(t.href,e)}})();function A(c,s,n){var r=6371.00877,t=5,e=30,l=60,h=126,y=38,a=43,u=136,m=Math.PI/180,I=180/Math.PI,M=r/t,v=e*m,P=l*m,g=h*m,D=y*m,f=Math.tan(Math.PI*.25+P*.5)/Math.tan(Math.PI*.25+v*.5);f=Math.log(Math.cos(v)/Math.cos(P))/Math.log(f);var o=Math.tan(Math.PI*.25+v*.5);o=Math.pow(o,f)*Math.cos(v)/f;var b=Math.tan(Math.PI*.25+D*.5);b=M*o/Math.pow(b,f);var d={};if(c=="toXY"){d.lat=s,d.lng=n;var p=Math.tan(Math.PI*.25+s*m*.5);p=M*o/Math.pow(p,f);var i=n*m-g;i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),i*=f,d.x=Math.floor(p*Math.sin(i)+a+.5),d.y=Math.floor(b-p*Math.cos(i)+u+.5)}else{d.x=s,d.y=n;var _=s-a,w=b-n+u;p=Math.sqrt(_*_+w*w);var T=Math.pow(M*o/p,1/f);T=2*Math.atan(T)-Math.PI*.5,Math.abs(_)<=0?i=0:Math.abs(w)<=0?i=Math.PI*.5:i=Math.atan2(_,w);var L=i/f+g;d.lat=T*I,d.lng=L*I}return d}const O=async(c,s,n,r)=>{const t="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?",e="serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&dataType=json&base_date="+c+"&base_time="+s+"&nx="+n+"&ny="+r,l=t+e;try{return(await fetch(l)).json()}catch(h){return console.error(h),"fail"}};function X(c){const s=c.coords.latitude,n=c.coords.longitude,r=A("toXY",s,n),t=r.x,e=r.y;let l=new Date;const h=("0"+l.getHours()).slice(-2),y=("0"+l.getMinutes()).slice(-2),a=Number(h+y);let u="";210<=a&&a<510?u="0200":510<=a&&a<810?u="0500":810<=a&&a<1110?u="0800":1110<=a&&a<1410?u="1100":1410<=a&&a<1710?u="1400":1710<=a&&a<2010?u="1700":2010<=a&&a<2310?u="2000":(2310<=a||(l=new Date(new Date().setDate(new Date().getDate()-1))),u="2300");const m=l.getFullYear(),I=("0"+(l.getMonth()+1)).slice(-2),M=("0"+l.getDate()).slice(-2),v=`${m}${I}${M}`,P=`${u}`;document.querySelector("#standardTime").innerText=`${m}년 ${I}월 ${M}일 ${P.slice(0,2)}시 기준`,O(v,P,t,e).then(g=>{if(g!=="fail"){const D=document.querySelector("#weather span:first-child"),f=document.querySelector("#weather span:nth-child(2)"),o=g.response.body.items.item[0].fcstValue,b=g.response.body.items.item[7].fcstValue,d=g.response.body.items.item[8].fcstValue;let p="";b>=50||[1,2,3,4].includes(d)?p="☂️":p="🌈",D.innerText=`${o}℃`,f.innerText=p;const i=document.querySelector("#image");o>=28?i.src="../img/summer1.png":o>=23&&o<28?i.src="../img/summer2.png":o>=20&&o<23?i.src="../img/spring1.png":o>=17&&o<20?i.src="../img/spring2.png":o>=12&&o<17?i.src="../img/fall1.png":o>=9&&o<12?i.src="../img/fall2.png":o>=5&&o<9?i.src="../img/winter1.png":o<5&&(i.src="../img/winter2.png")}if(g==="fail")return alert("날씨 정보를 가져오지 못했습니다.")})}function q(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(X,q);const Y=async()=>{const n="https://sgisapi.kostat.go.kr/OpenAPI3/auth/authentication.json?"+"consumer_key=ba34dc5fa9b44d508fdb&consumer_secret=cb5934392922407e8811";try{return(await fetch(n)).json()}catch(r){return console.error(r),"fail"}},k=async(c,s,n)=>{const r="https://sgisapi.kostat.go.kr/OpenAPI3/transformation/transcoord.json?",t="src=4326&dst=5181&posX="+n+"&posY="+s+"&accessToken="+c,e=r+t;try{return(await fetch(e)).json()}catch(l){return console.error(l),"fail"}},E=async(c,s)=>{const n="http://apis.data.go.kr/B552584/MsrstnInfoInqireSvc/getNearbyMsrstnList?",r="tmX="+c+"&tmY="+s+"&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT/VfLl5i1bns2e+5RguVPd8lC+UZ2VDyHyVolEYXk6WoFiA==",t=n+r;try{return(await fetch(t)).json()}catch(e){return console.error(e),"fail"}},S=async c=>{const s="http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?",n="stationName="+c+"&dataTerm=DAILY&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&ver=1.0",r=s+n;try{return(await fetch(r)).json()}catch(t){return console.error(t),"fail"}};function V(c){S(c).then(s=>{if(s!=="fail"){const n=document.querySelector("#weather span:last-child"),r=s.response.body.items[0].pm10Grade,t=s.response.body.items[0].pm25Grade;let e="";r>2||t>2?e="😷":e="😊",n.innerText=e}if(s==="fail")return alert("미세먼지 정보를 가져오지 못했습니다.")})}function x(c){const s=c.coords.latitude,n=c.coords.longitude;Y().then(r=>{if(r!=="fail"){const t=r.result.accessToken;k(t,s,n).then(e=>{if(e!=="fail"){const l=e.result.posX,h=e.result.posY;E(l,h).then(y=>{if(y!=="fail"){const a=y.response.body.items[0].stationName;V(a)}if(y==="fail")return V("종로구"),alert("가까운 미세먼지 측정소 조회에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(e==="fail")return V("종로구"),alert("TM 좌표 변환 api 호출에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(r==="fail")return V("종로구"),alert("TM 좌표 변환 api용 액세스 토큰 발급에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}function $(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(x,$);document.querySelector("#app").innerHTML=`
  <div class="main">
    <span id="standardTime"></span>
    <h1>날씨별 추천 옷차림</h1>
    <div id="weather">
      <span id="temp"></span>
      <span class="icon"></span>
      <span class="icon"></span>
    </div>
    <img id="image" src="" />
  </div>
`;
