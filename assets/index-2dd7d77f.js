(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();function Y(c,s,o){var r=6371.00877,t=5,e=30,l=60,m=126,y=38,n=43,f=136,p=Math.PI/180,b=180/Math.PI,M=r/t,v=e*p,k=l*p,g=m*p,T=y*p,u=Math.tan(Math.PI*.25+k*.5)/Math.tan(Math.PI*.25+v*.5);u=Math.log(Math.cos(v)/Math.cos(k))/Math.log(u);var a=Math.tan(Math.PI*.25+v*.5);a=Math.pow(a,u)*Math.cos(v)/u;var w=Math.tan(Math.PI*.25+T*.5);w=M*a/Math.pow(w,u);var h={};if(c=="toXY"){h.lat=s,h.lng=o;var d=Math.tan(Math.PI*.25+s*p*.5);d=M*a/Math.pow(d,u);var i=o*p-g;i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),i*=u,h.x=Math.floor(d*Math.sin(i)+n+.5),h.y=Math.floor(w-d*Math.cos(i)+f+.5)}else{h.x=s,h.y=o;var I=s-n,_=w-o+f;d=Math.sqrt(I*I+_*_);var P=Math.pow(M*a/d,1/u);P=2*Math.atan(P)-Math.PI*.5,Math.abs(I)<=0?i=0:Math.abs(_)<=0?i=Math.PI*.5:i=Math.atan2(I,_);var S=i/u+g;h.lat=P*b,h.lng=S*b}return h}const x=async(c,s,o,r)=>{const t="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?",e="serviceKey=mQ0C12hi52wn1N9RhhfSxJSYjkA92xfKit7obUfHYpv0ZsBwkipaWlxIfa5zs0kgfTYvkbm2WNkuDClC0kBmCw%3D%3D&dataType=json&base_date="+c+"&base_time="+s+"&nx="+o+"&ny="+r,l=t+e;try{return(await fetch(l)).json()}catch(m){return console.error(m),"fail"}};function O(c){const s=c.coords.latitude,o=c.coords.longitude,r=Y("toXY",s,o),t=r.x,e=r.y;let l=new Date;const m=("0"+l.getHours()).slice(-2),y=("0"+l.getMinutes()).slice(-2),n=Number(m+y);let f="";210<=n&&n<510?f="0200":510<=n&&n<810?f="0500":810<=n&&n<1110?f="0800":1110<=n&&n<1410?f="1100":1410<=n&&n<1710?f="1400":1710<=n&&n<2010?f="1700":2010<=n&&n<2310?f="2000":(2310<=n||(l=new Date(new Date().setDate(new Date().getDate()-1))),f="2300");const p=l.getFullYear(),b=("0"+(l.getMonth()+1)).slice(-2),M=("0"+l.getDate()).slice(-2),v=`${p}${b}${M}`,k=`${f}`;document.querySelector("#standardTime").innerText=`${p}년 ${b}월 ${M}일 ${k.slice(0,2)}시 기준`,x(v,k,t,e).then(g=>{if(g!=="fail"){const T=document.querySelector("#weather span:first-child"),u=document.querySelector("#weather span:nth-child(2)"),a=g.response.body.items.item[0].fcstValue,w=g.response.body.items.item[7].fcstValue,h=g.response.body.items.item[8].fcstValue;let d="";w>=50||[1,2,3,4].includes(h)?d="☂️":d="🌈",T.innerText=`${a}℃`,u.innerText=d;const i=document.querySelector("#image");a>=28?i.src="https://dd-stack.github.io/dress-for-the-weather/img/summer1.png":a>=23&&a<28?i.src="https://dd-stack.github.io/dress-for-the-weather/img/summer2.png":a>=20&&a<23?i.src="https://dd-stack.github.io/dress-for-the-weather/img/spring1.png":a>=17&&a<20?i.src="https://dd-stack.github.io/dress-for-the-weather/img/spring2.png":a>=12&&a<17?i.src="https://dd-stack.github.io/dress-for-the-weather/img/fall1.png":a>=9&&a<12?i.src="https://dd-stack.github.io/dress-for-the-weather/img/fall2.png":a>=5&&a<9?i.src="https://dd-stack.github.io/dress-for-the-weather/img/winter1.png":a<5&&(i.src="https://dd-stack.github.io/dress-for-the-weather/img/winter2.png")}if(g==="fail")return alert("날씨 정보를 가져오지 못했습니다.")})}function A(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(O,A);const N=async()=>{const o="https://sgisapi.kostat.go.kr/OpenAPI3/auth/authentication.json?"+"consumer_key=ba34dc5fa9b44d508fdb&consumer_secret=cb5934392922407e8811";try{return(await fetch(o)).json()}catch(r){return console.error(r),"fail"}},C=async(c,s,o)=>{const r="https://sgisapi.kostat.go.kr/OpenAPI3/transformation/transcoord.json?",t="src=4326&dst=5181&posX="+o+"&posY="+s+"&accessToken="+c,e=r+t;try{return(await fetch(e)).json()}catch(l){return console.error(l),"fail"}},j=async(c,s)=>{const o="http://apis.data.go.kr/B552584/MsrstnInfoInqireSvc/getNearbyMsrstnList?",r="tmX="+c+"&tmY="+s+"&returnType=json&serviceKey=mQ0C12hi52wn1N9RhhfSxJSYjkA92xfKit7obUfHYpv0ZsBwkipaWlxIfa5zs0kgfTYvkbm2WNkuDClC0kBmCw%3D%3D",t=o+r;try{return(await fetch(t,{method:"POST"})).json()}catch(e){return console.error(e),"fail"}},L=async c=>{const s="http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?",o="stationName="+c+"&dataTerm=DAILY&returnType=json&serviceKey=mQ0C12hi52wn1N9RhhfSxJSYjkA92xfKit7obUfHYpv0ZsBwkipaWlxIfa5zs0kgfTYvkbm2WNkuDClC0kBmCw%3D%3D&ver=1.0",r=s+o;try{return(await fetch(r)).json()}catch(t){return console.error(t),"fail"}};function D(c){L(c).then(s=>{if(s!=="fail"){const o=document.querySelector("#weather span:last-child"),r=s.response.body.items[0].pm10Grade,t=s.response.body.items[0].pm25Grade;let e="";r>2||t>2?e="😷":e="😊",o.innerText=e}if(s==="fail")return alert("미세먼지 정보를 가져오지 못했습니다.")})}function $(c){const s=c.coords.latitude,o=c.coords.longitude;N().then(r=>{if(r!=="fail"){const t=r.result.accessToken;C(t,s,o).then(e=>{if(e!=="fail"){const l=e.result.posX,m=e.result.posY;j(l,m).then(y=>{if(y!=="fail"){const n=y.response.body.items[0].stationName;D(n)}if(y==="fail")return D("종로구"),alert("가까운 미세먼지 측정소 조회에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(e==="fail")return D("종로구"),alert("TM 좌표 변환 api 호출에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(r==="fail")return D("종로구"),alert("TM 좌표 변환 api용 액세스 토큰 발급에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}function q(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition($,q);document.querySelector("#app").innerHTML=`
  <div class="main">
    <span id="standardTime"></span>
    <h1>날씨별 추천 옷차림</h1>
    <div id="weather">
      <span id="temp"></span>
      <span class="icon"></span>
      <span class="icon"></span>
    </div>
    <img id="image" src="" />
  </div>
`;
