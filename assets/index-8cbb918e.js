(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const l of e.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=o(t);fetch(t.href,e)}})();function L(c,s,o){var r=6371.00877,t=5,e=30,l=60,g=126,y=38,a=43,u=136,p=Math.PI/180,w=180/Math.PI,M=r/t,v=e*p,I=l*p,m=g*p,D=y*p,d=Math.tan(Math.PI*.25+I*.5)/Math.tan(Math.PI*.25+v*.5);d=Math.log(Math.cos(v)/Math.cos(I))/Math.log(d);var n=Math.tan(Math.PI*.25+v*.5);n=Math.pow(n,d)*Math.cos(v)/d;var b=Math.tan(Math.PI*.25+D*.5);b=M*n/Math.pow(b,d);var f={};if(c=="toXY"){f.lat=s,f.lng=o;var h=Math.tan(Math.PI*.25+s*p*.5);h=M*n/Math.pow(h,d);var i=o*p-m;i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI),i*=d,f.x=Math.floor(h*Math.sin(i)+a+.5),f.y=Math.floor(b-h*Math.cos(i)+u+.5)}else{f.x=s,f.y=o;var P=s-a,_=b-o+u;h=Math.sqrt(P*P+_*_);var T=Math.pow(M*n/h,1/d);T=2*Math.atan(T)-Math.PI*.5,Math.abs(P)<=0?i=0:Math.abs(_)<=0?i=Math.PI*.5:i=Math.atan2(P,_);var k=i/d+m;f.lat=T*w,f.lng=k*w}return f}const A=async(c,s,o,r)=>{const t="http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?",e="serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&dataType=json&base_date="+c+"&base_time="+s+"&nx="+o+"&ny="+r,l=t+e;try{return(await fetch(l)).json()}catch(g){return console.error(g),"fail"}};function O(c){const s=c.coords.latitude,o=c.coords.longitude,r=L("toXY",s,o),t=r.x,e=r.y;let l=new Date;const g=("0"+l.getHours()).slice(-2),y=("0"+l.getMinutes()).slice(-2),a=Number(g+y);let u="";210<=a&&a<510?u="0200":510<=a&&a<810?u="0500":810<=a&&a<1110?u="0800":1110<=a&&a<1410?u="1100":1410<=a&&a<1710?u="1400":1710<=a&&a<2010?u="1700":2010<=a&&a<2310?u="2000":(2310<=a||(l=new Date(new Date().setDate(new Date().getDate()-1))),u="2300");const p=l.getFullYear(),w=("0"+(l.getMonth()+1)).slice(-2),M=("0"+l.getDate()).slice(-2),v=`${p}${w}${M}`,I=`${u}`;document.querySelector("#standardTime").innerText=`${p}년 ${w}월 ${M}일 ${I.slice(0,2)}시 기준`,A(v,I,t,e).then(m=>{if(m!=="fail"){const D=document.querySelector("#weather span:first-child"),d=document.querySelector("#weather span:nth-child(2)"),n=m.response.body.items.item[0].fcstValue,b=m.response.body.items.item[7].fcstValue,f=m.response.body.items.item[8].fcstValue;let h="";b>=50||[1,2,3,4].includes(f)?h="☂️":h="🌈",D.innerText=`${n}℃`,d.innerText=h;const i=document.querySelector("#image");n>=28?i.src="https://dd-stack.github.io/dress-for-the-weather/img/summer1.png":n>=23&&n<28?i.src="https://dd-stack.github.io/dress-for-the-weather/img/summer2.png":n>=20&&n<23?i.src="https://dd-stack.github.io/dress-for-the-weather/img/spring1.png":n>=17&&n<20?i.src="https://dd-stack.github.io/dress-for-the-weather/img/spring2.png":n>=12&&n<17?i.src="https://dd-stack.github.io/dress-for-the-weather/img/fall1.png":n>=9&&n<12?i.src="https://dd-stack.github.io/dress-for-the-weather/img/fall2.png":n>=5&&n<9?i.src="https://dd-stack.github.io/dress-for-the-weather/img/winter1.png":n<5&&(i.src="https://dd-stack.github.io/dress-for-the-weather/img/winter2.png")}if(m==="fail")return alert("날씨 정보를 가져오지 못했습니다.")})}function X(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(O,X);const q=async()=>{const o="https://sgisapi.kostat.go.kr/OpenAPI3/auth/authentication.json?"+"consumer_key=ba34dc5fa9b44d508fdb&consumer_secret=cb5934392922407e8811";try{return(await fetch(o)).json()}catch(r){return console.error(r),"fail"}},Y=async(c,s,o)=>{const r="https://sgisapi.kostat.go.kr/OpenAPI3/transformation/transcoord.json?",t="src=4326&dst=5181&posX="+o+"&posY="+s+"&accessToken="+c,e=r+t;try{return(await fetch(e)).json()}catch(l){return console.error(l),"fail"}},E=async(c,s)=>{const o="http://apis.data.go.kr/B552584/MsrstnInfoInqireSvc/getNearbyMsrstnList?",r="tmX="+c+"&tmY="+s+"&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT/VfLl5i1bns2e+5RguVPd8lC+UZ2VDyHyVolEYXk6WoFiA==",t=o+r;try{return(await fetch(t)).json()}catch(e){return console.error(e),"fail"}},S=async c=>{const s="http://apis.data.go.kr/B552584/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?",o="stationName="+c+"&dataTerm=DAILY&returnType=json&serviceKey=1sJ7p5qep1Esv0VsbmdnxcIfXV4QwvnULJol7JPT%2FVfLl5i1bns2e%2B5RguVPd8lC%2BUZ2VDyHyVolEYXk6WoFiA%3D%3D&ver=1.0",r=s+o;try{return(await fetch(r)).json()}catch(t){return console.error(t),"fail"}};function V(c){S(c).then(s=>{if(s!=="fail"){const o=document.querySelector("#weather span:last-child"),r=s.response.body.items[0].pm10Grade,t=s.response.body.items[0].pm25Grade;let e="";r>2||t>2?e="😷":e="😊",o.innerText=e}if(s==="fail")return alert("미세먼지 정보를 가져오지 못했습니다.")})}function x(c){const s=c.coords.latitude,o=c.coords.longitude;q().then(r=>{if(r!=="fail"){const t=r.result.accessToken;Y(t,s,o).then(e=>{if(e!=="fail"){const l=e.result.posX,g=e.result.posY;E(l,g).then(y=>{if(y!=="fail"){const a=y.response.body.items[0].stationName;V(a)}if(y==="fail")return V("종로구"),alert("가까운 미세먼지 측정소 조회에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(e==="fail")return V("종로구"),alert("TM 좌표 변환 api 호출에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}if(r==="fail")return V("종로구"),alert("TM 좌표 변환 api용 액세스 토큰 발급에 실패했습니다. 종로구 기준으로 미세먼지가 표시됩니다.")})}function $(){alert("위치 확인 권한을 허용해 주세요.")}navigator.geolocation.getCurrentPosition(x,$);document.querySelector("#app").innerHTML=`
  <div class="main">
    <span id="standardTime"></span>
    <h1>날씨별 추천 옷차림</h1>
    <div id="weather">
      <span id="temp"></span>
      <span class="icon"></span>
      <span class="icon"></span>
    </div>
    <img id="image" src="" />
  </div>
`;
